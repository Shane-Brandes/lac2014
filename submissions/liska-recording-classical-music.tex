\documentclass[11pt,a4paper]{article}
\usepackage{lac2014}

% Style the document.
% For any further use of the document (e.g. in the context of proceedings)
% this \usepackage can simply be removed.
% Packages that may be necessary to display the _content_ of this paper
% are called directly from within this file.
\usepackage{ulCFPstyles}

% More packages needed for compiling this document
\usepackage{hyperref}

\sloppy
\newenvironment{contentsmall}{\small}

\usepackage{fontspec}
\usepackage{polyglossia}
\usepackage{microtype}

\usepackage{xcolor}

\title{A New Concept of Recording Classical Music}

%see lac2012.sty for how to format multiple authors!
\author
{Urs LISKA
\\ mail@ursliska.de
}



\begin{document}
\maketitle


\begin{abstract}
\begin{contentsmall}
This paper reconsiders the “Arranger Window” concept of \textsc{daw} programs from the perspective of recording classical music.
I will present a new concept of recording classical music with the main concern being the organization of the recorded material and the preparation of an editing plan.
For this I will outline some ideas of a possible approach towards designing a software application.

Specific stress is put on plain text storage and the use of version control for project management, offering perspectives for collaborative workflows.

\end{contentsmall}
\end{abstract}

\keywords{
\begin{contentsmall}
Music production, classical music, workflows.
\end{contentsmall}
}

\section{Introduction}

As a technically inclined musician I have always been interested in recording processes, from pubertal experiments on a four-track tape deck until today where music production on the computer is ubiquitous.
But in recent years I had the opportunity and reason to reflect on the workflows imposed by the usual \textsc{daw} tools in a more substantial way.
As a pianist I could produce a consideral number of professional recordings, totalling in eight CDs, recorded in more than 30 studio days over several years.
The recording producers entrusted me with the complete recordings along with their annotated scores so I could judge the first edits and express my wishes and suggestions for improvements very concisely. 
For some of the recordings I actually did the first edits myself with \emph{Ardour}.
This way I had around 70 hours of recorded material to sort, evaluate and process.
This experience convinced me that the fundamental concepts of today's \textsc{daw} programs are really designed for producing \emph{pop} music.

In this paper I'm going to outline a new approach to the task of managing recorded material from the perspective of recording \emph{classical} music.
The central idea is to shift focus from a fixed time-line in an \emph{Arranger Window} to the concept of self-contained \emph{Takes} that are aware of their content instead of only their length.
I'll outline ideas how these new ideas could be reflected in a \textsc{gui} application, although I currently don't have (or rather can't afford) any implementation plans.
The issue I don't have a definite opinion about is to which extent such an application could/should be aimed at being a \emph{replacement} for existing tools or how it could be \emph{integrated} in an efficient toolchain.

By sharing these ideas publicly I'm hoping for interesting insights and feedback, and maybe this discussion can motivate people to seriously think about making use of them.
And given enough interest from people with the necessary complementary skills I might even be talked into starting a new project.

\section{Two Recording Paradigms}

Of course there are more shades to the matter  than simply speaking of “pop” and “classical” music.
And of course there is a variety of approaches how to produce recordings that don't match the black \& white labeling suggested by such a separation.
So please bear with me if I'm occasionally over-generalizing things.
But I think there basically are two main paradigms of recording music, and for simplicity's sake I will call them the \emph{pop} and the \emph{classical} approach in this paper.

\subsection{Recording Pop Music and the Multi-Track Tape Metaphor}

The \emph{pop} approach is based on the metaphor of a multi-track magnetic tape, reflected by an \emph{Arranger Window} in virtually all \textsc{daw} programs I know of.
The tape reel is mapped to a \emph{timeline}, and each new “take” is recorded to an absolute position on it, adding to or replacing anything that has already been recorded.
Different layers (voices/instruments) of the arrangement can be recorded sequentially as “overdubs” on multiple “tracks” representing those on the vintage tape.
We can move takes around or copy, multiply and edit them, but everything takes place in the context of the fixed timeline.

\subsection{Recording Classical Music}
 
By contrast the \emph{classical} approach imitates a (stereo) magnetic tape treated with scissors and adhesive tape.
The complete arrangement is played simultaneously and recorded to one track, without overdubs.
Instead of selecting from the available \emph{parallel} takes the editor extracts selections from the takes and glues them together \emph{consecutively}, creating a seemingly continuous recording.

While this process results in a series of segments on a horizontal timeline too, there are significant differences to the previously described set-up.
In particular the timeline doesn't have a predefined structure but will be the \emph{result} of the final arrangement of takes.
This implies that the absolute position of any given track is only defined at the end of the editing process.
As a result the editor has to ensure that any given edit doesn't have negative side-effects on later parts of the production.
Of course today's tools offer assistance with these problems, but the conceptual issue remains.

Another difference is that \emph{conceptually} we don't have a vertical stack of tracks but only one%
\footnote{Of course the source material will be recorded to discrete tracks on disk, but from a user's perspective it's only one track in most situations.}.
The presence of multiple tracks that \textsc{daw}s offer is actually a waste of screen estate for the recording producer of classical music.
While she usually \emph{does} use these tracks as a kind of stash to experiment with alternative takes for a given spot I will show that this task can be addresses in a completely different manner.

Reality proves that it \emph{is} perfectly possible to produce classical recordings with tools adhering to the pop paradigm.
But it just isn't a really natural approach, and there could be fundamental improvements to the way we conceive this specific task. 

\section{A New Approach to Managing Recorded Material}

While preparing an editing plan the task of a recording producer boils down to keeping track of recorded takes and choosing the best take for each section of the composition.
If the recording session has been complicated this house-keeping can be a tedious and error-prone process.
Usually the recording session yields an annotated score with entries for take starts and usually (but not equally reliably) also where takes end.
Additionally the recording producer will make notes about good or bad takes, problematic or particularly good spots in individual takes, and sometimes also suggestions about concrete transitions between takes.

If the recording session has been easy it can be a straightforward process to create an editing plan from that.
But if it left the producer with a three-figure number of takes it's very tedious (to say the least) to \emph{reliably} look up usable takes for any given measure from such a score.
First of all she has to determine \emph{all} takes covering the range in question, which can be cumbersome because she has to ensure not to miss anything which started earlier.
Then it's crucial to have the takes evaluated and this evaluation to be documented properly -- in order to avoid having to listen to the takes over and over again.
But even this will merely give pointers to the takes as a whole -- while navigating to them to find the actual position of the given musical moment is still up to the user.

So the fundamental idea of my proposed new concept is:
If we're going to document our material anyway, why don't we simultaneously “teach” the takes about themselves?
In the following sections I'll elaborate on this conceptual layer, leaving out ideas for concrete implementations for a later chapter.

\subsection{Takes Know About Their Content}

The core idea of this paper's approach to recording classical music is making the takes completely aware of their musical content and the editor's rating.
In order to achieve this I suggest a switch of perspective and not to deal with \emph{Regions} as parts of recorded audio files but rather with \emph{Takes} as parts of the composition.
For the whole process of analyzing and evaluating the recorded material we don't need the arranger window with its fixed timeline at all.
By contrast we're only interested in the selection and ordering of takes as well as in determining usable transitions between them.
Instead of \emph{placing} regions on a timeline we're going to \emph{chain} takes and define their transitions.
Therefore our focus (and that of a new application) will be on working with individual takes.

As a consequence we also require our project to be aware of the composition, which is an additional layer and therefore some overhead the producer has to maintain.
But I'm sure this investment instantly pays off and isn't a real issue.
To get started with a project the basic requirement is to provide not more than the total number of measures%
\footnote{Or any other unit or numbering scheme, e.\,g.\ rehearsal marks, systems or pages.}.
The producer will refine the representation of the musical structure along the way -- while doing the housekeeping she has to do anyway.

With each added piece of information the project will inherently learn about the composition.
And with that knowledge it will increasingly be able to assist the producer in managing the recorded material.

\subsection{Annotating Takes}
Traditionally the producer documents the material in some sort of list, on paper or in a (text or spreadsheet) document.
Instead of this I suggest to implement dedicated \emph{Take} objects that contain all relevant information about a take.

The fundamental data a take object has to know is the covered range in musical terms, along with a reference to the audio file it is contained in.
This is all the producer has to provide for all takes to get started with a project, so the new approach won't actually impose any significant overhead to the user.
We can further narrow this down by storing the \emph{usable} recorded range (as opposed to the total range), along with pointers to the actual positions in the audio files.
This will effectively hide away any unusable material so we don't have to bother with it anymore.

While evaluating a take we can add more information on the musical structure to the take object.
We can add metadata like time signature changes and particularly markers linking positions in the music (e.\,g.\ measures) to positions in the audio file.
Each new entry will increase the take's knowledge about the musical structure and will improve the interpolation of other positions.
This information is synchronized globally, so adding information to a take will increase the whole project's data coverage.
An application will be increasingly able to locate positions in audio files that correspond to a given musical moment.
Concretely this will allow the producer to ask for alternative takes, and the application can present all takes covering the given range and navigate to the respective positions for immediate playback.

\subsection{Storage and Version Control}

I suggest storing the information about the \emph{Take} objects in individual text files, one file for each take.
An application implementing my concept should transparently use plain text files and version control as its storage mechanism, for which I see several advantages%
\footnote{What I've written with regard to scholarly editing of scores (\url{http://lilypondblog.org/2013/07/plain-text-files-in-music/}) applies equally to the current context}:
\begin{itemize}
\item Undo/redo cannot only be \emph{unlimited} but also completely \emph{selective}.
\item There is an exhaustive \emph{project history} readily available to be presented in any desired form.
Commits are also a natural place to store meta information in their messages.
\item \emph{Branching} provides a way to always work in the context of an implicit session.
There is no need for “autosave”, because all changes are stored immediately to disk, so a program crash doesn't lose \emph{any} information.
Instead of “saving” at the end of the session the current branch is merged into master.
\item I'm sure one can make good use of branching to design workflows with “named sessions” (e.\,g.\ for trying out some hacks or to switch working context temporarily).
\item And of course this widely opens the door for \emph{collaborative workflows} where for example the musicians can evaluate takes while the editor is preparing his editing plan.
\end{itemize}

However, this has to be absolutely transparent, and the ordinary user should not be required to learn \emph{any} versioning syntax or terminology.
Such a requirement would significantly reduce acceptance with the main target group.

\medskip
Instead of inventing a new plain text file format or using some form of \textsc{xml} I suggest using the LilyPond%
\footnote{\url{http://www.lilypond.org}}
input language as the format for take files.
We are talking about describing and annotating musical structures, and LilyPond offers a concise input language for just this, which is also very suitable for version control.
It is highly customizable, can be annotated, and we could even use LilyPond itself to “engrave” a final editing plan as a score.

\section{Components of an Application}

By now it seems possible to think about implementing a \textsc{gui} application to annotate takes.
But in my eyes this would only make sense if it's possible to create a professional tool for professional users, anything else seems like a waste of time.
Before I finish this paper with some thoughts how such an application look like in general and where it could fit in the “workbench” of a professional recording producer I'm going to describe the core components that such an application would have to have.

\subsection{Annotating a Single Take}
The core element of our application is an editor for individual takes.
This is what we'll spend most of our time with, particularly during the initial evaluation of the recorded material but also later at any time.
Therefore this shouldn't be a dialog but a dockable panel which is permanently visible and simply gets updated when a new take is selected.
It contains a zoomable graphical representation of the audio in the take, presumably as a waveform or volume graph display, as well as some elements like marker indicators and editors.
Playback controls should cover the usual range of features like moving forward and backward, listening to ranges, start from marker positions etc.

This representation of a take is covered by a “timeline” representing the musical structure, that is it doesn't (primarily) displays a time code but rather barlines rests and time signature, similar to a percussion staff.
Rehearsal marks, tempo indicators and more might easily be added to this.
Initially this musical structure consists of evenly spaced measures with a default time signature, but during work the editor can add relevant information such as time signature changes.
And she can link the musical structure to positions in the audio files with an interface similar to setting markers.
Through this the program also gets an inherent understanding of tempo changes allowing it to interpolate positions for playback.
The timeline should visually distinguish between positions \emph{set explicitely} and \emph{interpolated}.

(There is one little detail I'd like to point out here: By trimming a take to the \emph{usable} range one can effectively kick the useless material out of sight.
No need anymore to re-listen to false starts or page-turning interruptions etc.)

Information edited in an individual take will be propagated to the whole project and may be averaged with information from other takes.
This will deepen the project's knowledge about the musical structure and gradually improve the accuracy of position interpolations.
This means that if you start to edit a take covering music which was already annotated in another take the program already knows about changes in time signatures and tempo.

But of course the most relevant information added to takes is our evaluation.
It should be possible to rate any range or spot numerically, with some special values available form marking something as “unusable”, “usable as base material”, “suggested” or ”to be used” and “editing plan”.
Apart from numerical or tabular display the waveform representation could visualize this through differently colored background or a similar way.
Adding ratings should be accessible through right-clicking on the waveform or through keyboard shortcuts while playing back.
Apart from the ratings one can add arbitrary verbal comments to the take as a whole, specific spots or regions or explicit ratings.

It should be possible (but I'm not sure yet if it's worth the effort) to compile a score fragment with LilyPond, representing the musical structure and displaying the rating and comments in some way.

\subsection{Project Overview}
The “Project View” of this initial application should be very much list-like.
Graphical solutions integrating into a “timeline”-like representation of the composition and much more are considerations for the last section of this paper.
So we start with something like a traditional “Region List”, but with the benefit of having superior information available for sorting, highlighting or filtering items, namely the information on the musical content and our ratings.

While in traditional \textsc{daw}s takes are initially sorted by number, that is by their recording order -- which usually is only vaguely related to the musical structure of the recorded piece.
By default our application should sort takes by their starting point, but we could also sort by overall rating, length of usable ranges or whatever we consider useful.
Filtering can be applied so we can hide takes based on their content or their rating.
For example we could -- while editing a single take -- see a list of all alternative takes containing the spot the playback cursor currently is, reversly sorted by rating.
I won't list more ideas here (because that's something for the actual application design), but I'm sure you get the idea how this approach can dramatically increase productivity for the main task a recording producer has for editing classical music: preparing the editing plan.

\subsection{Editing Plan}
Conceptually an editing plan is a list of pairs with musical sections and references to takes.
Traditionally takes are only referenced as numbers because that's all we have to refer to.
But in our application we have significantly more: links from musical moments to positions in the audio files the takes are based on.
The precision of these links depends on the accuracy of our annotations, but generally one can expect that particularly the points actually interesting for transition between takes have been thoroughly examined.
Suggesting to add exact links to these points surely isn't much overhead, particularly given the advantage you gain by it.

With the knowledge our application has of the material we can easily display a list of takes that have ratings of at least “suggested”.
But even more interesting is the reversal: a list of musical ranges that \emph{don't} have takes with sufficient rating.
With these options we always have a clear picture of the progress of our editing plan, we see which parts of the composition still have to be resolved, and for the other parts we can see which alternative takes we may choose from.

In addition to a tabular representation this can be presented in a \textsc{ui} element quite similar to an arranger window.
The horizontal axis represents the timeline but is of course primarily structured musically.
The topmost “track” is reserved for the final editing plan, then there are tracks (or groups of tracks) for “to be used” or “suggested” takes, followed by a last area for all other takes.
Takes are presented as blocks (by default without waveform display but colored according to the rating) placed at their position in the piece.
This way one has a complete overview of the available recorded material, structured by relevance and quality through the assignment to tracks and by the color-coding.

When we're finished with our preparation -- that is the “editing plan” track is seamlessly filled with take fragments -- the editing plan can be exported: As a list with transition points and references to takes and positions in them, and possibly as a score (compiled by LilyPond) displaying the same information.
Additionally it would be nice to be able to export to \textsc{daw} programs' project files so one could for example open the result in Ardour and have the relevant takes already in the arranger window, ready to be finally edited.

\subsubsection{Transition Editor}
There is one more topic to consider, which would be more suitable for the final section of this paper but which is necessary to make a usable initial application: a \emph{Transition Editor}.

One crucial point when preparing an editing plan is not only to select usable takes for a given musical moment or range but also check if any considered transition between takes is actually possible.
Takes have to be compatible with respect to tempo, dynamics, internal balance and “atmosphere” (reverberation trails are particularly tricky) -- and this can only be tested by actually trying a transition.
Without such a feature even an initial application wouldn't be really usable.

Therefore I suggest to implement a rather simplistic Transition Editor which allows to position two takes relatively and offer simple options to edit the cross-fade.
From my experience this will be sufficient in most cases to judge if a given transition can be done later with a professional tool -- please refer to the last section of this paper for my thoughts on the future of this functionality.

By moving this to a dedicated tool we can avoid usability issues one usually has when working in an arranger window, particularly we can benefit from the fact that we're not bound by keeping in sync with a timeline.
So we don't have to scroll and zoom around to find and pull interesting takes to our current timeline position.
Instead (as we know about the links between musical structure and playback positions in the audio files) we can simply \emph{select} a desired take, which is then immediately present pre-cut at about the right point.
Imagine a dialog where you have a musical moment (e.\,g. “M.\,128, 3rd beat”) as the central reference point.
From a dropdown list you can then choose (for the “left” or “right” part of the transition) from all applicable takes, sorted by rating.
All this is self-contained and completely independent from the notion of a timeline.
The result of such an edit will simply be a usable transition which can be used in the editing plan (or put on a stash of usable transitions for later consideration).
If we have edited all transitions that are necessary to join the take fragments in the editing plan everything is there to render a preliminary first edit of the recording -- which will in most cases already be usable as a nice reference.
How this is actually managed and made accessible for a user interface will be a matter of concrete application design.

\section{The Bigger Picture}
While an application as outlined in the previous section could already be tremenduously efficient for managing classical recordings it is still far from being able to replace dedicated \textsc{daw}s like Ardour, ProTools or Pyramix from the perspective of a professional recording producer.
But anything less than aiming at a professional tool for professional users doesn't seem to make sense to me.
Therefore it will be necessary to carefully consider how to achieve professional quality.

There are new thoughts in my approach and surely some unique structural and interface concepts, but of course many of the problems at hand have already been solved perfectly.
For example I don't see a point in reinventing a versatile waveform display.
And there has of course been so much research in Digital Signal Processing that it seems stupid trying to do anything in this area better than existing solutions, without any prior experience.
So the question is if and how it is possible to reuse existing solutions, to integrate with existing applications or at least provide tools and workflows for a seamless cooperation with existing applications.

Probably the nicest solution would be to actually create an application that contains everything one needs.
This would make it possible to benefit from the new interface approach and complete a production within one environment.
Take the Transition Editor as an example: If it would be possible to tweak this to professional level it would provide a unparalleled tool to edit classical recordings.
But in order to achieve that it will be indispensable to reuse existing technology, either from applications like Ardour or through libraries and toolkits.

If one decides that this isn't the way to go one would have to see if it's possible to integrate the concepts into existing applications, for example by offering an alternative to the arranger window and providing the necessary additional tools.
This way one could simply \emph{use} existing tools like waveform display, audio core, editors etc. -- and maybe at the same time offer the new tools to be used in other contexts in the existing application.
But it may well be that such an approach would even be more complex than inventing a complete application.

A last approach -- and maybe not the worst -- would be to have the new application as a standalone program but offer tools to integrate workflows with other programs.
For example my application would work on existing audio files which are located anywhere and “imported” through a simple symlink.
If that symlink pointed to the audio folder of another application one could simply do the recording in the other application and the newly recorded takes are automatically added to the project.
The editing plan could then be prepared in the new application and the final editing be done in the other \textsc{daw}.
This approach has the main advantage that the recording producers can use whatever tools they are used to (or have available) -- provided our new application is able to run on the same OS or can use a shared storage device it can link to.

\subsection{Development Platform}
Of course this project can be realized in nearly any conceivable way, but if I were to start it I would start with a PyQt application.
Having some experience contributing to the Frescobaldi%
\footnote{\url{http://www.frescobaldi.org}}
LilyPond editor I think this is a very suitable platform for this kind of project -- and particularly the one I'm familiar with.

The \textsc{ui} elements needed for this application could completely be reused in a greater context of a \textsc{daw}-like program, therefore I would try to design them in a way that they can simply be \emph{used} as widgets in alater program too.

\subsection{Final Considerations}
There are a few topics that have to be considered

Other processes involved but not my main interest:

\begin{itemize}
\item Recording music
\item Mixing music
\item Actual editing (?)
\item Exporting (e.g. to CD)\\
	The least would be to export an Ardour project file
\item Git workflows, particularly collaborative ones.
\end{itemize}

\section{Conclusions}

State only here that the Arranger Window is completely inappropriate?

\begin{quote}


In a classical recording we only need one track at a time.
Actually we are recording on multiple tracks (each sound source has its own track) -- but only as a means of separating sound sources up to the final mixdown, in general we don't have any interest in acccessing and displaying them separately during the editing process.

Usually the editor uses additional tracks in the Arranger Window as a kind of dashboard to juggle with alternative takes until she's decided which ones to use for the final edit.
But while this is \emph{possible} it is quite \emph{counterproductive} for the major tasks when preparing a classical recording.
\end{quote}

\section{Acknowledgements}

Our thanks go to \ldots .

\end{document}
